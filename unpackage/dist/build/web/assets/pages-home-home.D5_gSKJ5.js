import{n as e,c as a,w as s,i,a as t,U as n,b as l,v as r,x as o,e as c,t as d,F as g,Y as m,H as f,d as u,f as h,l as p}from"./index-DD8SDI5w.js";import{a as k}from"./axios.CCYSaZn9.js";import{_}from"./background.9mxQRA6f.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=y({data:()=>({icons:[{src:"../../static/食谱查询.png",link:"/pages/shiwuchaxun/shiwuchaxun"},{src:"../../static/排行榜.png",link:"/pages/paihang/paihang"},{src:"../../static/红黑榜.png",link:"/pages/redblack/redblack"},{src:"../../static/随心配.png",link:"/pages/suixin/suixin"}],rankingItems:[],recipes:[],loading:!0,error:!1}),mounted(){this.getRankingItems(),this.getRecipes()},methods:{getRankingItems(){k.get("http://129.204.151.245:5001/ingredients/random3").then((e=>{200===e.status&&e.data?Array.isArray(e.data)?(this.rankingItems=e.data.map((e=>({name:e.ingredient_name,image:e.url||"/pages/images/logo.jpg",type:e.type||"暂无类型信息",link:`/pages/foodDetail/foodDetail?foodId=${e.ingredient_id}`,foodId:e.ingredient_id}))),console.log("食物排行榜数据获取成功:",this.rankingItems)):(console.error("后端返回的数据不是数组:",e.data),this.error=!0):(console.error("获取食物排行榜数据失败:",e),this.error=!0)})).catch((e=>{console.error("请求食物排行榜数据失败:",e),this.error=!0})).finally((()=>{this.loading=!1}))},getRecipes(){k.get("http://129.204.151.245:5001/dishes/random3").then((e=>{200===e.status&&e.data?Array.isArray(e.data)?(this.recipes=e.data.map((e=>({name:e.dish_name,image:e.dish_image||"/pages/images/logo.jpg",score:e.score||"暂无评分",link:`/pages/dishDetail/dishDetail?dishId=${e.dishId}&merchantId=${e.merchant_id}`,dishId:e.dishId,merchantId:e.merchant_id}))),console.log("食谱推荐数据获取成功:",this.recipes)):(console.error("后端返回的数据不是数组:",e.data),this.error=!0):(console.error("获取食谱推荐数据失败:",e),this.error=!0)})).catch((e=>{console.error("请求食谱推荐数据失败:",e),this.error=!0})).finally((()=>{this.loading=!1}))},refreshRankingItems(){console.log("刷新食物排行榜数据..."),this.getRankingItems()},refreshRecipes(){console.log("刷新食谱推荐数据..."),this.getRecipes()},navigateToDetail(a){a.link?(console.log("Navigating to:",a.link),e({url:a.link,fail:e=>{console.error("Navigation failed:",e)}})):console.error("No link found for item:",a)}}},[["render",function(e,k,y,I,v,C){const x=u,D=h,R=i,b=p;return t(),a(R,{class:"container"},{default:s((()=>[n("div",{class:"main-image"},[n("img",{src:_,alt:"logo",class:"background-image"})]),l(R,{class:"icon-group"},{default:s((()=>[(t(!0),r(g,null,o(v.icons,(e=>(t(),a(R,{class:"icon-item",key:e.text,onClick:a=>C.navigateToDetail(e)},{default:s((()=>[l(x,{class:"icon-image",src:e.src},null,8,["src"]),l(D,{class:"icon-text"},{default:s((()=>[c(d(e.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),l(R,{class:"nutrition-diary"},{default:s((()=>[l(R,{class:"diary-item"},{default:s((()=>[l(R,{class:"diary-content"},{default:s((()=>[l(D,{class:"diary-title"},{default:s((()=>[c("营养日记")])),_:1}),l(D,{class:"diary-fruit"},{default:s((()=>[c("草莓")])),_:1}),l(D,{class:"diary-description"},{default:s((()=>[c("百变冬日小甜心，低卡低糖，营养不减。")])),_:1})])),_:1}),l(x,{class:"diary-image",src:"/yangshiji/assets/%E8%8D%89%E8%8E%93-BBZhABcv.png"})])),_:1})])),_:1}),v.rankingItems.length>0?(t(),a(R,{key:0,class:"food-ranking"},{default:s((()=>[l(R,{class:"ranking-header"},{default:s((()=>[l(D,{class:"ranking-title"},{default:s((()=>[c("食物排行")])),_:1}),l(D,{class:"refresh-icon",alt:"换一换",onClick:C.refreshRankingItems},{default:s((()=>[c("🔄 ")])),_:1},8,["onClick"]),l(D,{class:"ranking-subtitle"},{default:s((()=>[c("更健康的食材")])),_:1})])),_:1}),l(R,{class:"ranking-items"},{default:s((()=>[(t(!0),r(g,null,o(v.rankingItems,(e=>(t(),a(R,{class:"ranking-item",key:e.name,onClick:a=>C.navigateToDetail(e)},{default:s((()=>[l(x,{class:"food-image",src:e.image},null,8,["src"]),l(R,{class:"ranking-info"},{default:s((()=>[l(D,{class:"food-name"},{default:s((()=>[c(d(e.name),1)])),_:2},1024),l(D,{class:"food-type"},{default:s((()=>[c(d(e.type),1)])),_:2},1024)])),_:2},1024),l(b,{class:"view-button",onClick:m((a=>C.navigateToDetail(e)),["stop"])},{default:s((()=>[c("查看")])),_:2},1032,["onClick"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):f("",!0),v.recipes.length>0?(t(),a(R,{key:1,class:"recipe-recommendation"},{default:s((()=>[l(R,{class:"recommendation-header"},{default:s((()=>[l(D,{class:"recommendation-title"},{default:s((()=>[c("食谱推荐")])),_:1}),l(D,{class:"refresh-icon",alt:"换一换",onClick:C.refreshRecipes},{default:s((()=>[c("🔄 ")])),_:1},8,["onClick"]),l(D,{class:"recommendation-subtitle"},{default:s((()=>[c("更适合你的食谱")])),_:1})])),_:1}),l(R,{class:"recommendation-items"},{default:s((()=>[(t(!0),r(g,null,o(v.recipes,(e=>(t(),a(R,{class:"recommendation-item",key:e.dishId,onClick:a=>C.navigateToDetail(e)},{default:s((()=>[l(x,{class:"recipe-image",src:e.image},null,8,["src"]),l(R,{class:"recipe-info"},{default:s((()=>[l(D,{class:"recipe-name"},{default:s((()=>[c(d(e.name),1)])),_:2},1024),l(D,{class:"recipe-score"},{default:s((()=>[c(d(e.score),1)])),_:2},1024)])),_:2},1024),l(b,{class:"view-button",onClick:m((a=>C.navigateToDetail(e)),["stop"])},{default:s((()=>[c("查看")])),_:2},1032,["onClick"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):f("",!0)])),_:1})}],["__scopeId","data-v-606f9770"]]);export{I as default};
