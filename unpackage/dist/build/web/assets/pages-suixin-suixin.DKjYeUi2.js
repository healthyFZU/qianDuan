import{n as a,c as o,w as s,i as e,a as i,U as r,b as t,e as d,H as l,v as n,x as c,t as g,F as f,f as h,d as m,l as u}from"./index-DD8SDI5w.js";import{a as _}from"./axios.CCYSaZn9.js";import{_ as p}from"./background.9mxQRA6f.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const v=k({data:()=>({foods:[],loading:!1,error:!1}),mounted(){this.getFoods()},methods:{getFoods(){this.loading=!0,this.error=!1,_.get("http://129.204.151.245:5001/dishes/random6").then((a=>{200===a.status&&a.data?Array.isArray(a.data)?(this.foods=a.data.map((a=>({name:a.dish_name,image:a.dish_image||"/pages/images/logo.jpg",introduction:a.introduction||"暂无介绍",score:a.score||"暂无评分",link:`/pages/dishDetail/dishDetail?dishId=${a.dishId}&merchantId=${a.merchant_id}`,dishId:a.dishId}))),console.log("食谱推荐数据获取成功:",this.foods)):(console.error("后端返回的数据不是数组:",a.data),this.error=!0):(console.error("获取食谱推荐数据失败:",a),this.error=!0)})).catch((a=>{console.error("请求食谱推荐数据失败:",a),this.error=!0})).finally((()=>{this.loading=!1}))},changeFoodImage(){this.getFoods()},navigateToDetail(o){o.link?(console.log("Navigating to:",o.link),a({url:o.link,fail:a=>{console.error("Navigation failed:",a)}})):console.error("No link found for item:",o)}}},[["render",function(a,_,k,v,y,I){const j=h,F=m,x=u,D=e;return i(),o(D,{class:"content"},{default:s((()=>[r("div",{class:"main-image"},[r("img",{src:p,alt:"logo",class:"background-image"})]),t(j,{class:"greeting"},{default:s((()=>[d("Hi, 吃货！")])),_:1}),t(F,{class:"food-image",src:"/yangshiji/assets/f-D1EsX5Vy.jpg"}),t(x,{class:"change",onClick:I.changeFoodImage},{default:s((()=>[d("换一换")])),_:1},8,["onClick"]),y.loading?(i(),o(D,{key:0,class:"loading"},{default:s((()=>[d("加载中...")])),_:1})):l("",!0),y.error?(i(),o(D,{key:1,class:"error"},{default:s((()=>[d("获取食物数据失败，请稍后再试。")])),_:1})):l("",!0),t(D,{class:"food-cards"},{default:s((()=>[(i(!0),n(f,null,c(y.foods,((a,e)=>(i(),o(D,{key:e,class:"food-card",onClick:o=>I.navigateToDetail(a)},{default:s((()=>[t(F,{src:a.image,class:"food-card-image"},null,8,["src"]),t(D,{class:"food-card-info"},{default:s((()=>[t(j,{class:"food-title"},{default:s((()=>[d(g(a.name),1)])),_:2},1024),t(j,{class:"food-introduction"},{default:s((()=>[d(g(a.introduction),1)])),_:2},1024),t(j,{class:"food-score"},{default:s((()=>[d("评分: "+g(a.score),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}],["__scopeId","data-v-d3466f12"]]);export{v as default};
