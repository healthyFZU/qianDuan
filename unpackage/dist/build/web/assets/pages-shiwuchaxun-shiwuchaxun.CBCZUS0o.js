import{_ as e,s,n as a,c as i,w as t,i as r,a as o,b as l,e as d,v as n,x as c,t as h,Y as p,F as u,d as f,f as g,l as m}from"./index-DD8SDI5w.js";import{_}from"./background.9mxQRA6f.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k=v({data:()=>({recipes:[],ingredientsData:[],loading:!0,error:!1,favorites:[]}),computed:{recipesWithDetails(){return this.recipes.map((e=>({...e,healthIndex:e.nutrition||[],types:e.types||"未知类型"})))}},methods:{fetchIngredients(){e({url:"http://129.204.151.245:5001/ingredients",method:"GET",success:e=>{200===e.statusCode&&e.data?(this.ingredientsData=e.data,console.log("获取食材数据成功:",this.ingredientsData)):this.handleError("获取食材数据失败")},fail:e=>{console.error("请求食材数据失败:",e),this.handleError("请求食材数据失败")},complete:()=>{this.loading=!1}})},getRecipes(){e({url:"http://129.204.151.245:5001/dishes",method:"GET",success:e=>{200===e.statusCode&&e.data?(this.recipes=e.data,console.log("获取食谱数据成功:",this.recipes)):this.handleError("获取食谱数据失败")},fail:e=>{console.error("请求食谱数据失败:",e),this.handleError("请求食谱数据失败")},complete:()=>{this.loading=!1}})},addToFavorite(e){this.favorites.find((s=>s.dishId===e.dishId))?s({title:"已收藏",icon:"none",duration:2e3}):(this.favorites.push(e),s({title:"已添加到我的收藏",icon:"success",duration:2e3}))},navigateToDetail(e){const s=`/pages/dishDetail/dishDetail?dishId=${e.dishId}&merchantId=${e.merchant_id}`;console.log("Navigating to:",s),a({url:s,fail:e=>{console.error("Navigation failed:",e)}})},handleError(e){this.error=!0,s({title:e,icon:"none",duration:2e3})}},mounted(){this.fetchIngredients(),this.getRecipes()}},[["render",function(e,s,a,v,k,I){const y=f,D=r,E=g,C=m;return o(),i(D,{class:"container"},{default:t((()=>[l(D,{class:"main-image"},{default:t((()=>[l(y,{src:_,class:"background-image"})])),_:1}),l(D,{class:"recipes"},{default:t((()=>[k.loading?(o(),i(D,{key:0,class:"loading"},{default:t((()=>[d("加载中...")])),_:1})):k.error?(o(),i(D,{key:1,class:"error"},{default:t((()=>[d("数据加载失败，请稍后重试。")])),_:1})):0===k.recipes.length?(o(),i(D,{key:2,class:"no-results"},{default:t((()=>[d("没有找到相关食谱。")])),_:1})):(o(),i(D,{key:3,class:"recipe-list"},{default:t((()=>[(o(!0),n(u,null,c(I.recipesWithDetails,(e=>(o(),i(D,{key:e.dishId,class:"recipe-item",onClick:s=>I.navigateToDetail(e)},{default:t((()=>[l(y,{class:"recipe-image",src:e.dish_image},null,8,["src"]),l(D,{class:"recipe-info"},{default:t((()=>[l(E,{class:"recipe-name"},{default:t((()=>[d(h(e.dish_name),1)])),_:2},1024),l(E,{class:"recipe-type"},{default:t((()=>[d(h(e.types),1)])),_:2},1024),l(E,{class:"recipe-price"},{default:t((()=>[d("¥"+h(e.price),1)])),_:2},1024),l(E,{class:"recipe-ingredients"},{default:t((()=>[d(h(e.ingredients.join(", ")),1)])),_:2},1024)])),_:2},1024),l(C,{class:"add-to-favorite",onClick:p((s=>I.addToFavorite(e)),["stop"])},{default:t((()=>[d("收藏")])),_:2},1032,["onClick"])])),_:2},1032,["onClick"])))),128))])),_:1}))])),_:1})])),_:1})}],["__scopeId","data-v-5098f1f2"]]);export{k as default};
