import{R as e,v as a,b as s,U as o,w as l,t,H as n,n as r,I as u,f as c,l as d,a as i,e as p,d as v}from"./index-DD8SDI5w.js";import{_ as m}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=m({__name:"forgetpwd",setup(m){const g=e(""),f=e(""),w=e(""),h=e("");async function y(){if(f.value===w.value)try{const e=await fetch("http://127.0.0.1:5000/user/reset_password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNum:g.value,password:f.value})});if(!e.ok)throw new Error("Network response was not ok");const a=e.headers.get("Content-Type");if(!a||!a.includes("application/json"))throw new Error("Response is not JSON");const s=await e.json();console.log(s),s.success&&"True"===s.success?(alert("å¯†ç é‡ç½®æˆåŠŸï¼Œè¯·ä½¿ç”¨æ–°å¯†ç ç™»å½•"),r({url:"/pages/login/login"})):h.value=s.message||"å¯†ç é‡ç½®å¤±è´¥"}catch(e){console.error("å¯†ç é‡ç½®è¯·æ±‚å¤±è´¥:",e),h.value="å¯†ç é‡ç½®è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åå†è¯•"}else h.value="ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"}return(e,r)=>{const m=v,V=u,_=c,C=d;return i(),a("div",{class:"forgot-password-container"},[s(m,{class:"logo",src:"/yangshiji/assets/forgetpwd-BJwhyIfj.jpg",mode:"aspectFit"}),o("div",{class:"input-group"},[o("span",{class:"icon"},"ğŸ“±"),s(V,{type:"text",modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=e=>g.value=e),placeholder:"è¯·è¾“å…¥æ‚¨çš„æ‰‹æœºå·"},null,8,["modelValue"])]),o("div",{class:"input-group"},[o("span",{class:"icon"},"ğŸ”‘"),s(V,{type:"text",modelValue:e.verificationCode,"onUpdate:modelValue":r[1]||(r[1]=a=>e.verificationCode=a),placeholder:"è¯·è¾“å…¥éªŒè¯ç "},null,8,["modelValue"]),s(_,{class:"get-code",onClick:e.getVerificationCode},{default:l((()=>[p(t(e.isCodeButtonDisabled?`${e.countdown}ç§’åé‡è¯•`:"è·å–éªŒè¯ç "),1)])),_:1},8,["onClick"])]),o("div",{class:"input-group"},[o("span",{class:"icon"},"ğŸ”’"),s(V,{type:"password",modelValue:f.value,"onUpdate:modelValue":r[2]||(r[2]=e=>f.value=e),placeholder:"è¯·é‡æ–°è®¾ç½®æ‚¨çš„å¯†ç "},null,8,["modelValue"])]),o("div",{class:"input-group"},[o("span",{class:"icon"},"ğŸ“§"),s(V,{type:"password",modelValue:w.value,"onUpdate:modelValue":r[3]||(r[3]=e=>w.value=e),placeholder:"å†æ¬¡ç¡®è®¤æ‚¨çš„å¯†ç "},null,8,["modelValue"])]),s(C,{class:"reset-button",onClick:y},{default:l((()=>[p("é‡ç½®å¯†ç ")])),_:1}),h.value?(i(),a("div",{key:0,class:"error-message"},t(h.value),1)):n("",!0)])}}},[["__scopeId","data-v-25ee949a"]]);export{g as default};
